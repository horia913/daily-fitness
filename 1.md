| table_schema | table_name          | column_name               | data_type                | character_maximum_length | numeric_precision | numeric_scale | is_nullable | column_default            | column_comment |
| ------------ | ------------------- | ------------------------- | ------------------------ | ------------------------ | ----------------- | ------------- | ----------- | ------------------------- | -------------- |
| public       | achievements        | id                        | uuid                     | null                     | null              | null          | NO          | gen_random_uuid()         | null           |
| public       | achievements        | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | achievements        | title                     | text                     | null                     | null              | null          | NO          | null                      | null           |
| public       | achievements        | description               | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | achievements        | achievement_type          | text                     | null                     | null              | null          | NO          | null                      | null           |
| public       | achievements        | metric_type               | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | achievements        | metric_value              | numeric                  | null                     | 8                 | 2             | YES         | null                      | null           |
| public       | achievements        | metric_unit               | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | achievements        | achieved_date             | date                     | null                     | null              | null          | NO          | CURRENT_DATE              | null           |
| public       | achievements        | is_public                 | boolean                  | null                     | null              | null          | YES         | true                      | null           |
| public       | achievements        | goal_id                   | uuid                     | null                     | null              | null          | YES         | null                      | null           |
| public       | achievements        | workout_id                | uuid                     | null                     | null              | null          | YES         | null                      | null           |
| public       | achievements        | created_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | assigned_meal_plans | id                        | bigint                   | null                     | 64                | 0             | NO          | null                      | null           |
| public       | assigned_meal_plans | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | assigned_meal_plans | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | assigned_meal_plans | meal_plan_template_id     | bigint                   | null                     | 64                | 0             | NO          | null                      | null           |
| public       | assigned_meal_plans | assigned_date             | date                     | null                     | null              | null          | NO          | null                      | null           |
| public       | assigned_workouts   | id                        | bigint                   | null                     | 64                | 0             | NO          | null                      | null           |
| public       | assigned_workouts   | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | assigned_workouts   | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | assigned_workouts   | workout_template_id       | bigint                   | null                     | 64                | 0             | NO          | null                      | null           |
| public       | assigned_workouts   | assigned_date             | date                     | null                     | null              | null          | NO          | null                      | null           |
| public       | assigned_workouts   | status                    | text                     | null                     | null              | null          | YES         | 'pending'::text           | null           |
| public       | body_metrics        | id                        | uuid                     | null                     | null              | null          | NO          | gen_random_uuid()         | null           |
| public       | body_metrics        | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | body_metrics        | coach_id                  | uuid                     | null                     | null              | null          | YES         | null                      | null           |
| public       | body_metrics        | weight_kg                 | numeric                  | null                     | 5                 | 2             | YES         | null                      | null           |
| public       | body_metrics        | body_fat_percentage       | numeric                  | null                     | 4                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | muscle_mass_kg            | numeric                  | null                     | 5                 | 2             | YES         | null                      | null           |
| public       | body_metrics        | visceral_fat_level        | integer                  | null                     | 32                | 0             | YES         | null                      | null           |
| public       | body_metrics        | left_arm_circumference    | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | right_arm_circumference   | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | torso_circumference       | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | waist_circumference       | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | hips_circumference        | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | left_thigh_circumference  | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | right_thigh_circumference | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | left_calf_circumference   | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | right_calf_circumference  | numeric                  | null                     | 5                 | 1             | YES         | null                      | null           |
| public       | body_metrics        | measured_date             | date                     | null                     | null              | null          | NO          | CURRENT_DATE              | null           |
| public       | body_metrics        | measurement_method        | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | body_metrics        | notes                     | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | body_metrics        | created_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | body_metrics        | updated_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | booked_sessions     | id                        | uuid                     | null                     | null              | null          | NO          | gen_random_uuid()         | null           |
| public       | booked_sessions     | time_slot_id              | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | booked_sessions     | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | booked_sessions     | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | booked_sessions     | session_type              | text                     | null                     | null              | null          | NO          | 'personal_training'::text | null           |
| public       | booked_sessions     | status                    | text                     | null                     | null              | null          | NO          | 'scheduled'::text         | null           |
| public       | booked_sessions     | notes                     | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | coach_notes               | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | client_feedback           | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | session_rating            | integer                  | null                     | 32                | 0             | YES         | null                      | null           |
| public       | booked_sessions     | actual_start_time         | timestamp with time zone | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | actual_end_time           | timestamp with time zone | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | cancelled_at              | timestamp with time zone | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | cancelled_by              | uuid                     | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | cancellation_reason       | text                     | null                     | null              | null          | YES         | null                      | null           |
| public       | booked_sessions     | created_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | booked_sessions     | updated_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | clients             | id                        | uuid                     | null                     | null              | null          | NO          | gen_random_uuid()         | null           |
| public       | clients             | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clients             | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clients             | status                    | text                     | null                     | null              | null          | NO          | 'active'::text            | null           |
| public       | clients             | created_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | clients             | updated_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | clip_cards          | id                        | bigint                   | null                     | 64                | 0             | NO          | null                      | null           |
| public       | clip_cards          | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clip_cards          | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clip_cards          | total_sessions            | integer                  | null                     | 32                | 0             | NO          | null                      | null           |
| public       | clip_cards          | used_sessions             | integer                  | null                     | 32                | 0             | NO          | 0                         | null           |
| public       | clipcard_types      | id                        | uuid                     | null                     | null              | null          | NO          | gen_random_uuid()         | null           |
| public       | clipcard_types      | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clipcard_types      | name                      | text                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clipcard_types      | sessions_count            | integer                  | null                     | 32                | 0             | NO          | null                      | null           |
| public       | clipcard_types      | validity_days             | integer                  | null                     | 32                | 0             | NO          | null                      | null           |
| public       | clipcard_types      | price                     | numeric                  | null                     | 10                | 2             | NO          | null                      | null           |
| public       | clipcard_types      | is_active                 | boolean                  | null                     | null              | null          | YES         | true                      | null           |
| public       | clipcard_types      | created_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | clipcard_types      | updated_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | clipcards           | id                        | uuid                     | null                     | null              | null          | NO          | gen_random_uuid()         | null           |
| public       | clipcards           | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clipcards           | client_id                 | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clipcards           | clipcard_type_id          | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clipcards           | sessions_total            | integer                  | null                     | 32                | 0             | NO          | null                      | null           |
| public       | clipcards           | sessions_used             | integer                  | null                     | 32                | 0             | YES         | 0                         | null           |
| public       | clipcards           | sessions_remaining        | integer                  | null                     | 32                | 0             | YES         | null                      | null           |
| public       | clipcards           | start_date                | date                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clipcards           | end_date                  | date                     | null                     | null              | null          | NO          | null                      | null           |
| public       | clipcards           | is_active                 | boolean                  | null                     | null              | null          | YES         | true                      | null           |
| public       | clipcards           | created_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | clipcards           | updated_at                | timestamp with time zone | null                     | null              | null          | YES         | now()                     | null           |
| public       | coach_availability  | id                        | uuid                     | null                     | null              | null          | NO          | gen_random_uuid()         | null           |
| public       | coach_availability  | coach_id                  | uuid                     | null                     | null              | null          | NO          | null                      | null           |
| public       | coach_availability  | day_of_week               | integer                  | null                     | 32                | 0             | NO          | null                      | null           |
| public       | coach_availability  | start_time                | time without time zone   | null                     | null              | null          | NO          | null                      | null           |
| public       | coach_availability  | end_time                  | time without time zone   | null                     | null              | null          | NO          | null                      | null           |
| public       | coach_availability  | slot_capacity             | integer                  | null                     | 32                | 0             | YES         | 4                         | null           |


| table_schema | table_name                   | constraint_name                                               | constraint_type | column_name                    | referenced_table             | referenced_column |
| ------------ | ---------------------------- | ------------------------------------------------------------- | --------------- | ------------------------------ | ---------------------------- | ----------------- |
| public       | achievements                 | achievements_client_id_fkey                                   | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | achievements                 | achievements_goal_id_fkey                                     | FOREIGN KEY     | goal_id                        | goals                        | id                |
| public       | achievements                 | achievements_workout_id_fkey                                  | FOREIGN KEY     | workout_id                     | workout_assignments          | id                |
| public       | body_metrics                 | body_metrics_client_id_fkey                                   | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | body_metrics                 | body_metrics_coach_id_fkey                                    | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | booked_sessions              | booked_sessions_cancelled_by_fkey                             | FOREIGN KEY     | cancelled_by                   | profiles                     | id                |
| public       | booked_sessions              | booked_sessions_client_id_fkey                                | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | booked_sessions              | booked_sessions_coach_id_fkey                                 | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | booked_sessions              | booked_sessions_time_slot_id_fkey                             | FOREIGN KEY     | time_slot_id                   | coach_time_slots             | id                |
| public       | clipcards                    | clipcards_clipcard_type_id_fkey                               | FOREIGN KEY     | clipcard_type_id               | clipcard_types               | id                |
| public       | coach_time_slots             | coach_time_slots_coach_id_fkey                                | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | coaches                      | coaches_profile_id_fkey                                       | FOREIGN KEY     | profile_id                     | profiles                     | id                |
| public       | coaches                      | coaches_referred_by_fkey                                      | FOREIGN KEY     | referred_by                    | profiles                     | id                |
| public       | exercise_alternatives        | exercise_alternatives_alternative_exercise_id_fkey            | FOREIGN KEY     | alternative_exercise_id        | exercises                    | id                |
| public       | exercise_alternatives        | exercise_alternatives_primary_exercise_id_fkey                | FOREIGN KEY     | primary_exercise_id            | exercises                    | id                |
| public       | fms_assessments              | fms_assessments_client_id_fkey                                | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | fms_assessments              | fms_assessments_coach_id_fkey                                 | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | goals                        | goals_client_id_fkey                                          | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | goals                        | goals_coach_id_fkey                                           | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | habit_assignments            | habit_assignments_habit_id_fkey                               | FOREIGN KEY     | habit_id                       | habits                       | id                |
| public       | habit_logs                   | habit_logs_assignment_id_fkey                                 | FOREIGN KEY     | assignment_id                  | habit_assignments            | id                |
| public       | leaderboard_rankings         | leaderboard_rankings_client_id_fkey                           | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | leaderboard_titles           | leaderboard_titles_client_id_fkey                             | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | meal_completions             | meal_completions_client_id_fkey                               | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | meal_completions             | meal_completions_meal_id_fkey                                 | FOREIGN KEY     | meal_id                        | meals                        | id                |
| public       | meal_food_items              | meal_food_items_food_id_fkey                                  | FOREIGN KEY     | food_id                        | foods                        | id                |
| public       | meal_food_items              | meal_food_items_meal_id_fkey                                  | FOREIGN KEY     | meal_id                        | meals                        | id                |
| public       | meal_items                   | meal_items_meal_id_fkey                                       | FOREIGN KEY     | meal_id                        | meals                        | id                |
| public       | meal_plan_assignments        | meal_plan_assignments_meal_plan_id_fkey                       | FOREIGN KEY     | meal_plan_id                   | meal_plans                   | id                |
| public       | meal_plan_items              | meal_plan_items_coach_id_fkey                                 | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | meal_plan_items              | meal_plan_items_food_id_fkey                                  | FOREIGN KEY     | food_id                        | foods                        | id                |
| public       | meal_plan_items              | meal_plan_items_meal_plan_id_fkey                             | FOREIGN KEY     | meal_plan_id                   | meal_plans                   | id                |
| public       | meals                        | meals_meal_plan_id_fkey                                       | FOREIGN KEY     | meal_plan_id                   | meal_plans                   | id                |
| public       | mobility_metrics             | mobility_metrics_client_id_fkey                               | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | mobility_metrics             | mobility_metrics_coach_id_fkey                                | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | personal_records             | personal_records_client_id_fkey                               | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | personal_records             | personal_records_exercise_id_fkey                             | FOREIGN KEY     | exercise_id                    | exercises                    | id                |
| public       | personal_records             | personal_records_workout_assignment_id_fkey                   | FOREIGN KEY     | workout_assignment_id          | workout_assignments          | id                |
| public       | program_assignment_progress  | program_assignment_progress_client_id_fkey                    | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | program_assignments          | program_assignments_client_id_fkey                            | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | program_assignments          | program_assignments_coach_id_fkey                             | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | program_assignments          | program_assignments_program_id_fkey                           | FOREIGN KEY     | program_id                     | workout_programs             | id                |
| public       | program_day_assignments      | program_day_assignments_program_assignment_id_fkey            | FOREIGN KEY     | program_assignment_id          | program_assignments          | id                |
| public       | program_day_assignments      | program_day_assignments_program_day_id_fkey                   | FOREIGN KEY     | program_day_id                 | program_days                 | id                |
| public       | program_day_assignments      | program_day_assignments_workout_assignment_id_fkey            | FOREIGN KEY     | workout_assignment_id          | workout_assignments          | id                |
| public       | program_days                 | program_days_program_id_fkey                                  | FOREIGN KEY     | program_id                     | workout_programs             | id                |
| public       | program_days                 | program_days_workout_template_id_fkey                         | FOREIGN KEY     | workout_template_id            | workout_templates            | id                |
| public       | program_workout_completions  | program_workout_completions_assignment_progress_id_fkey       | FOREIGN KEY     | assignment_progress_id         | program_assignment_progress  | id                |
| public       | program_workout_completions  | program_workout_completions_client_id_fkey                    | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | workout_assignments          | workout_assignments_client_id_fkey                            | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | workout_assignments          | workout_assignments_coach_id_fkey                             | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | workout_assignments          | workout_assignments_workout_template_id_fkey                  | FOREIGN KEY     | workout_template_id            | workout_templates            | id                |
| public       | workout_block_assignments    | workout_block_assignments_workout_assignment_id_fkey          | FOREIGN KEY     | workout_assignment_id          | workout_assignments          | id                |
| public       | workout_block_assignments    | workout_block_assignments_workout_block_id_fkey               | FOREIGN KEY     | workout_block_id               | workout_blocks               | id                |
| public       | workout_block_exercises      | workout_block_exercises_block_id_fkey                         | FOREIGN KEY     | block_id                       | workout_blocks               | id                |
| public       | workout_block_exercises      | workout_block_exercises_exercise_id_fkey                      | FOREIGN KEY     | exercise_id                    | exercises                    | id                |
| public       | workout_blocks               | workout_blocks_template_id_fkey                               | FOREIGN KEY     | template_id                    | workout_templates            | id                |
| public       | workout_cluster_sets         | workout_cluster_sets_block_exercise_id_fkey                   | FOREIGN KEY     | block_exercise_id              | workout_block_exercises      | id                |
| public       | workout_drop_sets            | workout_drop_sets_block_exercise_id_fkey                      | FOREIGN KEY     | block_exercise_id              | workout_block_exercises      | id                |
| public       | workout_exercise_assignments | workout_exercise_assignments_exercise_id_fkey                 | FOREIGN KEY     | exercise_id                    | exercises                    | id                |
| public       | workout_exercise_assignments | workout_exercise_assignments_workout_block_assignment_id_fkey | FOREIGN KEY     | workout_block_assignment_id    | workout_block_assignments    | id                |
| public       | workout_exercise_assignments | workout_exercise_assignments_workout_block_exercise_id_fkey   | FOREIGN KEY     | workout_block_exercise_id      | workout_block_exercises      | id                |
| public       | workout_exercise_logs        | workout_exercise_logs_exercise_id_fkey                        | FOREIGN KEY     | exercise_id                    | exercises                    | id                |
| public       | workout_exercise_logs        | workout_exercise_logs_workout_exercise_assignment_id_fkey     | FOREIGN KEY     | workout_exercise_assignment_id | workout_exercise_assignments | id                |
| public       | workout_exercise_logs        | workout_exercise_logs_workout_log_id_fkey                     | FOREIGN KEY     | workout_log_id                 | workout_logs                 | id                |
| public       | workout_ladder_sets          | workout_ladder_sets_block_exercise_id_fkey                    | FOREIGN KEY     | block_exercise_id              | workout_block_exercises      | id                |
| public       | workout_logs                 | workout_logs_client_id_fkey                                   | FOREIGN KEY     | client_id                      | profiles                     | id                |
| public       | workout_logs                 | workout_logs_workout_assignment_id_fkey                       | FOREIGN KEY     | workout_assignment_id          | workout_assignments          | id                |
| public       | workout_programs             | workout_programs_coach_id_fkey                                | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | workout_pyramid_sets         | workout_pyramid_sets_block_exercise_id_fkey                   | FOREIGN KEY     | block_exercise_id              | workout_block_exercises      | id                |
| public       | workout_rest_pause_sets      | workout_rest_pause_sets_block_exercise_id_fkey                | FOREIGN KEY     | block_exercise_id              | workout_block_exercises      | id                |
| public       | workout_templates            | workout_templates_coach_id_fkey                               | FOREIGN KEY     | coach_id                       | profiles                     | id                |
| public       | workout_time_protocols       | workout_time_protocols_block_id_fkey                          | FOREIGN KEY     | block_id                       | workout_blocks               | id                |


| schemaname | tablename             | indexname                                                       | indexdef                                                                                                                                                                       |
| ---------- | --------------------- | --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| public     | achievements          | achievements_pkey                                               | CREATE UNIQUE INDEX achievements_pkey ON public.achievements USING btree (id)                                                                                                  |
| public     | achievements          | idx_achievements_client_type                                    | CREATE INDEX idx_achievements_client_type ON public.achievements USING btree (client_id, achievement_type)                                                                     |
| public     | assigned_meal_plans   | assigned_meal_plans_pkey                                        | CREATE UNIQUE INDEX assigned_meal_plans_pkey ON public.assigned_meal_plans USING btree (id)                                                                                    |
| public     | assigned_workouts     | assigned_workouts_pkey                                          | CREATE UNIQUE INDEX assigned_workouts_pkey ON public.assigned_workouts USING btree (id)                                                                                        |
| public     | body_metrics          | body_metrics_client_id_measured_date_key                        | CREATE UNIQUE INDEX body_metrics_client_id_measured_date_key ON public.body_metrics USING btree (client_id, measured_date)                                                     |
| public     | body_metrics          | body_metrics_pkey                                               | CREATE UNIQUE INDEX body_metrics_pkey ON public.body_metrics USING btree (id)                                                                                                  |
| public     | body_metrics          | idx_body_metrics_client_date                                    | CREATE INDEX idx_body_metrics_client_date ON public.body_metrics USING btree (client_id, measured_date)                                                                        |
| public     | booked_sessions       | booked_sessions_pkey                                            | CREATE UNIQUE INDEX booked_sessions_pkey ON public.booked_sessions USING btree (id)                                                                                            |
| public     | booked_sessions       | idx_booked_sessions_client                                      | CREATE INDEX idx_booked_sessions_client ON public.booked_sessions USING btree (client_id)                                                                                      |
| public     | booked_sessions       | idx_booked_sessions_coach                                       | CREATE INDEX idx_booked_sessions_coach ON public.booked_sessions USING btree (coach_id)                                                                                        |
| public     | booked_sessions       | idx_booked_sessions_created_at                                  | CREATE INDEX idx_booked_sessions_created_at ON public.booked_sessions USING btree (created_at DESC)                                                                            |
| public     | booked_sessions       | idx_booked_sessions_status                                      | CREATE INDEX idx_booked_sessions_status ON public.booked_sessions USING btree (status)                                                                                         |
| public     | booked_sessions       | idx_booked_sessions_time_slot                                   | CREATE INDEX idx_booked_sessions_time_slot ON public.booked_sessions USING btree (time_slot_id)                                                                                |
| public     | clients               | clients_coach_id_client_id_key                                  | CREATE UNIQUE INDEX clients_coach_id_client_id_key ON public.clients USING btree (coach_id, client_id)                                                                         |
| public     | clients               | clients_pkey                                                    | CREATE UNIQUE INDEX clients_pkey ON public.clients USING btree (id)                                                                                                            |
| public     | clients               | idx_clients_client_id                                           | CREATE INDEX idx_clients_client_id ON public.clients USING btree (client_id)                                                                                                   |
| public     | clients               | idx_clients_coach_id                                            | CREATE INDEX idx_clients_coach_id ON public.clients USING btree (coach_id)                                                                                                     |
| public     | clients               | idx_clients_status                                              | CREATE INDEX idx_clients_status ON public.clients USING btree (status)                                                                                                         |
| public     | clip_cards            | clip_cards_pkey                                                 | CREATE UNIQUE INDEX clip_cards_pkey ON public.clip_cards USING btree (id)                                                                                                      |
| public     | clipcard_types        | clipcard_types_pkey                                             | CREATE UNIQUE INDEX clipcard_types_pkey ON public.clipcard_types USING btree (id)                                                                                              |
| public     | clipcard_types        | idx_clipcard_types_active                                       | CREATE INDEX idx_clipcard_types_active ON public.clipcard_types USING btree (is_active)                                                                                        |
| public     | clipcard_types        | idx_clipcard_types_coach_id                                     | CREATE INDEX idx_clipcard_types_coach_id ON public.clipcard_types USING btree (coach_id)                                                                                       |
| public     | clipcards             | clipcards_pkey                                                  | CREATE UNIQUE INDEX clipcards_pkey ON public.clipcards USING btree (id)                                                                                                        |
| public     | clipcards             | idx_clipcards_active                                            | CREATE INDEX idx_clipcards_active ON public.clipcards USING btree (is_active, end_date)                                                                                        |
| public     | clipcards             | idx_clipcards_client_coach                                      | CREATE INDEX idx_clipcards_client_coach ON public.clipcards USING btree (client_id, coach_id)                                                                                  |
| public     | clipcards             | idx_clipcards_client_id                                         | CREATE INDEX idx_clipcards_client_id ON public.clipcards USING btree (client_id)                                                                                               |
| public     | clipcards             | idx_clipcards_coach_id                                          | CREATE INDEX idx_clipcards_coach_id ON public.clipcards USING btree (coach_id)                                                                                                 |
| public     | clipcards             | idx_clipcards_end_date                                          | CREATE INDEX idx_clipcards_end_date ON public.clipcards USING btree (end_date)                                                                                                 |
| public     | clipcards             | idx_clipcards_type_id                                           | CREATE INDEX idx_clipcards_type_id ON public.clipcards USING btree (clipcard_type_id)                                                                                          |
| public     | coach_availability    | coach_availability_coach_id_day_of_week_start_time_end_time_key | CREATE UNIQUE INDEX coach_availability_coach_id_day_of_week_start_time_end_time_key ON public.coach_availability USING btree (coach_id, day_of_week, start_time, end_time)     |
| public     | coach_availability    | coach_availability_pkey                                         | CREATE UNIQUE INDEX coach_availability_pkey ON public.coach_availability USING btree (id)                                                                                      |
| public     | coach_time_slots      | coach_time_slots_pkey                                           | CREATE UNIQUE INDEX coach_time_slots_pkey ON public.coach_time_slots USING btree (id)                                                                                          |
| public     | coach_time_slots      | idx_coach_time_slots_availability                               | CREATE INDEX idx_coach_time_slots_availability ON public.coach_time_slots USING btree (is_available)                                                                           |
| public     | coach_time_slots      | idx_coach_time_slots_coach_date                                 | CREATE INDEX idx_coach_time_slots_coach_date ON public.coach_time_slots USING btree (coach_id, date)                                                                           |
| public     | coach_time_slots      | idx_coach_time_slots_coach_id                                   | CREATE INDEX idx_coach_time_slots_coach_id ON public.coach_time_slots USING btree (coach_id)                                                                                   |
| public     | coach_time_slots      | idx_coach_time_slots_date                                       | CREATE INDEX idx_coach_time_slots_date ON public.coach_time_slots USING btree (date)                                                                                           |
| public     | coaches               | coaches_pkey                                                    | CREATE UNIQUE INDEX coaches_pkey ON public.coaches USING btree (id)                                                                                                            |
| public     | coaches               | coaches_profile_id_key                                          | CREATE UNIQUE INDEX coaches_profile_id_key ON public.coaches USING btree (profile_id)                                                                                          |
| public     | coaches               | idx_coaches_hire_date                                           | CREATE INDEX idx_coaches_hire_date ON public.coaches USING btree (hire_date)                                                                                                   |
| public     | coaches               | idx_coaches_profile_id                                          | CREATE INDEX idx_coaches_profile_id ON public.coaches USING btree (profile_id)                                                                                                 |
| public     | coaches               | idx_coaches_status                                              | CREATE INDEX idx_coaches_status ON public.coaches USING btree (status)                                                                                                         |
| public     | daily_workout_cache   | daily_workout_cache_client_id_program_id_workout_date_key       | CREATE UNIQUE INDEX daily_workout_cache_client_id_program_id_workout_date_key ON public.daily_workout_cache USING btree (client_id, program_id, workout_date)                  |
| public     | daily_workout_cache   | daily_workout_cache_pkey                                        | CREATE UNIQUE INDEX daily_workout_cache_pkey ON public.daily_workout_cache USING btree (id)                                                                                    |
| public     | daily_workout_cache   | idx_daily_workout_cache_client_date                             | CREATE INDEX idx_daily_workout_cache_client_date ON public.daily_workout_cache USING btree (client_id, workout_date)                                                           |
| public     | exercise_alternatives | exercise_alternatives_pkey                                      | CREATE UNIQUE INDEX exercise_alternatives_pkey ON public.exercise_alternatives USING btree (id)                                                                                |
| public     | exercise_alternatives | exercise_alternatives_primary_exercise_id_alternative_exerc_key | CREATE UNIQUE INDEX exercise_alternatives_primary_exercise_id_alternative_exerc_key ON public.exercise_alternatives USING btree (primary_exercise_id, alternative_exercise_id) |
| public     | exercise_alternatives | idx_exercise_alternatives_alternative                           | CREATE INDEX idx_exercise_alternatives_alternative ON public.exercise_alternatives USING btree (alternative_exercise_id)                                                       |
| public     | exercise_alternatives | idx_exercise_alternatives_primary                               | CREATE INDEX idx_exercise_alternatives_primary ON public.exercise_alternatives USING btree (primary_exercise_id)                                                               |
| public     | exercise_categories   | exercise_categories_name_key                                    | CREATE UNIQUE INDEX exercise_categories_name_key ON public.exercise_categories USING btree (name)                                                                              |
| public     | exercise_categories   | exercise_categories_pkey                                        | CREATE UNIQUE INDEX exercise_categories_pkey ON public.exercise_categories USING btree (id)                                                                                    |
| public     | exercise_categories   | idx_exercise_categories_name                                    | CREATE INDEX idx_exercise_categories_name ON public.exercise_categories USING btree (name)                                                                                     |
| public     | exercises             | exercises_pkey                                                  | CREATE UNIQUE INDEX exercises_pkey ON public.exercises USING btree (id)                                                                                                        |
| public     | exercises             | idx_exercises_coach_id                                          | CREATE INDEX idx_exercises_coach_id ON public.exercises USING btree (coach_id)                                                                                                 |
| public     | fms_assessments       | fms_assessments_client_id_assessed_date_key                     | CREATE UNIQUE INDEX fms_assessments_client_id_assessed_date_key ON public.fms_assessments USING btree (client_id, assessed_date)                                               |
| public     | fms_assessments       | fms_assessments_pkey                                            | CREATE UNIQUE INDEX fms_assessments_pkey ON public.fms_assessments USING btree (id)                                                                                            |
| public     | fms_assessments       | idx_fms_assessments_client_date                                 | CREATE INDEX idx_fms_assessments_client_date ON public.fms_assessments USING btree (client_id, assessed_date)                                                                  |
| public     | food_items            | food_items_pkey                                                 | CREATE UNIQUE INDEX food_items_pkey ON public.food_items USING btree (id)                                                                                                      |
| public     | foods                 | foods_pkey                                                      | CREATE UNIQUE INDEX foods_pkey ON public.foods USING btree (id)                                                                                                                |
| public     | goals                 | goals_pkey                                                      | CREATE UNIQUE INDEX goals_pkey ON public.goals USING btree (id)                                                                                                                |
| public     | goals                 | idx_goals_client_status                                         | CREATE INDEX idx_goals_client_status ON public.goals USING btree (client_id, status)                                                                                           |
| public     | habit_assignments     | habit_assignments_habit_id_client_id_start_date_key             | CREATE UNIQUE INDEX habit_assignments_habit_id_client_id_start_date_key ON public.habit_assignments USING btree (habit_id, client_id, start_date)                              |
| public     | habit_assignments     | habit_assignments_pkey                                          | CREATE UNIQUE INDEX habit_assignments_pkey ON public.habit_assignments USING btree (id)                                                                                        |
| public     | habit_assignments     | idx_habit_assignments_active                                    | CREATE INDEX idx_habit_assignments_active ON public.habit_assignments USING btree (is_active)                                                                                  |
| public     | habit_assignments     | idx_habit_assignments_client_id                                 | CREATE INDEX idx_habit_assignments_client_id ON public.habit_assignments USING btree (client_id)                                                                               |
| public     | habit_assignments     | idx_habit_assignments_habit_id                                  | CREATE INDEX idx_habit_assignments_habit_id ON public.habit_assignments USING btree (habit_id)                                                                                 |
| public     | habit_logs            | habit_logs_assignment_id_log_date_key                           | CREATE UNIQUE INDEX habit_logs_assignment_id_log_date_key ON public.habit_logs USING btree (assignment_id, log_date)                                                           |
| public     | habit_logs            | habit_logs_pkey                                                 | CREATE UNIQUE INDEX habit_logs_pkey ON public.habit_logs USING btree (id)                                                                                                      |
| public     | habit_logs            | idx_habit_logs_assignment_id                                    | CREATE INDEX idx_habit_logs_assignment_id ON public.habit_logs USING btree (assignment_id)                                                                                     |
| public     | habit_logs            | idx_habit_logs_client_id                                        | CREATE INDEX idx_habit_logs_client_id ON public.habit_logs USING btree (client_id)                                                                                             |
| public     | habit_logs            | idx_habit_logs_date                                             | CREATE INDEX idx_habit_logs_date ON public.habit_logs USING btree (log_date)                                                                                                   |
| public     | habits                | habits_pkey                                                     | CREATE UNIQUE INDEX habits_pkey ON public.habits USING btree (id)                                                                                                              |
| public     | habits                | idx_habits_active                                               | CREATE INDEX idx_habits_active ON public.habits USING btree (is_active)                                                                                                        |
| public     | habits                | idx_habits_coach_id                                             | CREATE INDEX idx_habits_coach_id ON public.habits USING btree (coach_id)                                                                                                       |
| public     | invite_codes          | idx_invite_codes_coach_id                                       | CREATE INDEX idx_invite_codes_coach_id ON public.invite_codes USING btree (coach_id)                                                                                           |
| public     | invite_codes          | idx_invite_codes_code                                           | CREATE INDEX idx_invite_codes_code ON public.invite_codes USING btree (code)                                                                                                   |
| public     | invite_codes          | idx_invite_codes_expires_at                                     | CREATE INDEX idx_invite_codes_expires_at ON public.invite_codes USING btree (expires_at)                                                                                       |
| public     | invite_codes          | idx_invite_codes_is_used                                        | CREATE INDEX idx_invite_codes_is_used ON public.invite_codes USING btree (is_used)                                                                                             |
| public     | invite_codes          | invite_codes_code_key                                           | CREATE UNIQUE INDEX invite_codes_code_key ON public.invite_codes USING btree (code)                                                                                            |
| public     | invite_codes          | invite_codes_pkey                                               | CREATE UNIQUE INDEX invite_codes_pkey ON public.invite_codes USING btree (id)                                                                                                  |
| public     | leaderboard_rankings  | idx_rankings_category                                           | CREATE INDEX idx_rankings_category ON public.leaderboard_rankings USING btree (category, sex_filter, time_filter, rank)                                                        |
| public     | leaderboard_rankings  | idx_rankings_client                                             | CREATE INDEX idx_rankings_client ON public.leaderboard_rankings USING btree (client_id)                                                                                        |
| public     | leaderboard_rankings  | idx_rankings_score                                              | CREATE INDEX idx_rankings_score ON public.leaderboard_rankings USING btree (category, sex_filter, time_filter, score DESC)                                                     |
| public     | leaderboard_rankings  | idx_rankings_time_filter                                        | CREATE INDEX idx_rankings_time_filter ON public.leaderboard_rankings USING btree (time_filter)                                                                                 |
| public     | leaderboard_rankings  | leaderboard_rankings_client_id_category_sex_filter_time_fil_key | CREATE UNIQUE INDEX leaderboard_rankings_client_id_category_sex_filter_time_fil_key ON public.leaderboard_rankings USING btree (client_id, category, sex_filter, time_filter)  |
| public     | leaderboard_rankings  | leaderboard_rankings_pkey                                       | CREATE UNIQUE INDEX leaderboard_rankings_pkey ON public.leaderboard_rankings USING btree (id)                                                                                  |
| public     | leaderboard_titles    | idx_titles_client                                               | CREATE INDEX idx_titles_client ON public.leaderboard_titles USING btree (client_id)                                                                                            |
| public     | leaderboard_titles    | idx_titles_current                                              | CREATE INDEX idx_titles_current ON public.leaderboard_titles USING btree (category, sex_filter) WHERE (lost_at IS NULL)                                                        |
| public     | leaderboard_titles    | idx_titles_history                                              | CREATE INDEX idx_titles_history ON public.leaderboard_titles USING btree (earned_at DESC)                                                                                      |
| public     | leaderboard_titles    | leaderboard_titles_client_id_category_sex_filter_earned_at_key  | CREATE UNIQUE INDEX leaderboard_titles_client_id_category_sex_filter_earned_at_key ON public.leaderboard_titles USING btree (client_id, category, sex_filter, earned_at)       |
| public     | leaderboard_titles    | leaderboard_titles_pkey                                         | CREATE UNIQUE INDEX leaderboard_titles_pkey ON public.leaderboard_titles USING btree (id)                                                                                      |
| public     | meal_completions      | idx_meal_completions_client_id                                  | CREATE INDEX idx_meal_completions_client_id ON public.meal_completions USING btree (client_id)                                                                                 |
| public     | meal_completions      | idx_meal_completions_completed_at                               | CREATE INDEX idx_meal_completions_completed_at ON public.meal_completions USING btree (completed_at)                                                                           |
| public     | meal_completions      | idx_meal_completions_meal_id                                    | CREATE INDEX idx_meal_completions_meal_id ON public.meal_completions USING btree (meal_id)                                                                                     |
| public     | meal_completions      | meal_completions_pkey                                           | CREATE UNIQUE INDEX meal_completions_pkey ON public.meal_completions USING btree (id)                                                                                          |
| public     | meal_food_items       | idx_meal_food_items_food_id                                     | CREATE INDEX idx_meal_food_items_food_id ON public.meal_food_items USING btree (food_id)                                                                                       |
| public     | meal_food_items       | idx_meal_food_items_meal_id                                     | CREATE INDEX idx_meal_food_items_meal_id ON public.meal_food_items USING btree (meal_id)                                                                                       |
| public     | meal_food_items       | meal_food_items_pkey                                            | CREATE UNIQUE INDEX meal_food_items_pkey ON public.meal_food_items USING btree (id)                                                                                            |
| public     | meal_items            | idx_meal_items_meal_id                                          | CREATE INDEX idx_meal_items_meal_id ON public.meal_items USING btree (meal_id)                                                                                                 |
| public     | meal_items            | idx_meal_items_order_index                                      | CREATE INDEX idx_meal_items_order_index ON public.meal_items USING btree (order_index)                                                                                         |
| public     | meal_items            | meal_items_pkey                                                 | CREATE UNIQUE INDEX meal_items_pkey ON public.meal_items USING btree (id)                                                                                                      |

| schemaname | tablename             | policyname                                       | permissive | roles           | cmd    | qual                                                                                                                                                                                                                                            | with_check                                                                                                                                                                             |
| ---------- | --------------------- | ------------------------------------------------ | ---------- | --------------- | ------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public     | assigned_meal_plans   | Enable all for authenticated users               | PERMISSIVE | {public}        | ALL    | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | assigned_workouts     | Coaches can manage workouts                      | PERMISSIVE | {public}        | ALL    | (coach_id = auth.uid())                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | assigned_workouts     | Users can see workouts assigned to them          | PERMISSIVE | {public}        | SELECT | ((coach_id = auth.uid()) OR (client_id = auth.uid()))                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | body_metrics          | Clients can view their own body metrics          | PERMISSIVE | {public}        | SELECT | (client_id = auth.uid())                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | body_metrics          | Coaches can view their clients' body metrics     | PERMISSIVE | {public}        | ALL    | ((client_id IN ( SELECT clients.client_id
   FROM clients
  WHERE (clients.coach_id = auth.uid()))) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'admin'::text)))))                          | null                                                                                                                                                                                   |
| public     | booked_sessions       | Clients can book sessions                        | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | ((auth.uid() = client_id) AND (EXISTS ( SELECT 1
   FROM coach_time_slots
  WHERE ((coach_time_slots.id = booked_sessions.time_slot_id) AND (coach_time_slots.is_available = true))))) |
| public     | booked_sessions       | Clients can cancel their own sessions            | PERMISSIVE | {public}        | UPDATE | ((auth.uid() = client_id) AND (status = 'scheduled'::text))                                                                                                                                                                                     | ((auth.uid() = client_id) AND (status = ANY (ARRAY['cancelled'::text, 'scheduled'::text])))                                                                                            |
| public     | booked_sessions       | Clients can view their own booked sessions       | PERMISSIVE | {public}        | SELECT | ((auth.uid() = client_id) OR (auth.uid() = coach_id))                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | booked_sessions       | Coaches can update session details               | PERMISSIVE | {public}        | UPDATE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | (auth.uid() = coach_id)                                                                                                                                                                |
| public     | booked_sessions       | Coaches can view their sessions                  | PERMISSIVE | {public}        | SELECT | ((auth.uid() = coach_id) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text)))))                                                                                                     | null                                                                                                                                                                                   |
| public     | clients               | Clients can view their coach relationship        | PERMISSIVE | {public}        | SELECT | (client_id = auth.uid())                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | clients               | Coaches can manage their client relationships    | PERMISSIVE | {public}        | ALL    | (coach_id = auth.uid())                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clients               | Coaches can view their clients                   | PERMISSIVE | {public}        | SELECT | (coach_id = auth.uid())                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clients               | Users can view their client relationships        | PERMISSIVE | {public}        | SELECT | ((auth.uid() = coach_id) OR (auth.uid() = client_id))                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | clip_cards            | Enable all for authenticated users               | PERMISSIVE | {public}        | ALL    | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | clipcard_types        | Clients can view clipcard types                  | PERMISSIVE | {public}        | SELECT | (is_active = true)                                                                                                                                                                                                                              | null                                                                                                                                                                                   |
| public     | clipcard_types        | Coaches can delete their own clipcard types      | PERMISSIVE | {public}        | DELETE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | Coaches can insert their own clipcard types      | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (auth.uid() = coach_id)                                                                                                                                                                |
| public     | clipcard_types        | Coaches can manage their own clipcard types      | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | Coaches can update their own clipcard types      | PERMISSIVE | {public}        | UPDATE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | Coaches can view their own clipcard types        | PERMISSIVE | {public}        | SELECT | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | Enable delete for users based on coach_id        | PERMISSIVE | {public}        | DELETE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | Enable insert for authenticated users            | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (auth.uid() = coach_id)                                                                                                                                                                |
| public     | clipcard_types        | Enable read access for all users                 | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | clipcard_types        | Enable update for users based on coach_id        | PERMISSIVE | {public}        | UPDATE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | clipcard_types_delete                            | PERMISSIVE | {public}        | DELETE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | clipcard_types_insert                            | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (auth.uid() = coach_id)                                                                                                                                                                |
| public     | clipcard_types        | clipcard_types_select                            | PERMISSIVE | {public}        | SELECT | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcard_types        | clipcard_types_update                            | PERMISSIVE | {public}        | UPDATE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | Clients can view their own clipcards             | PERMISSIVE | {public}        | SELECT | (auth.uid() = client_id)                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | clipcards             | Coaches can delete their clipcards               | PERMISSIVE | {public}        | DELETE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | Coaches can insert their clipcards               | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (auth.uid() = coach_id)                                                                                                                                                                |
| public     | clipcards             | Coaches can manage clipcards for their clients   | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | Coaches can manage their clients' clipcards      | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | Coaches can update their clipcards               | PERMISSIVE | {public}        | UPDATE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | Coaches can view their clipcards                 | PERMISSIVE | {public}        | SELECT | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | Enable delete for coaches                        | PERMISSIVE | {public}        | DELETE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | Enable insert for coaches                        | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (auth.uid() = coach_id)                                                                                                                                                                |
| public     | clipcards             | Enable read access for coaches and clients       | PERMISSIVE | {public}        | SELECT | ((auth.uid() = coach_id) OR (auth.uid() = client_id))                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | clipcards             | Enable update for coaches                        | PERMISSIVE | {public}        | UPDATE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | clipcards_delete                                 | PERMISSIVE | {public}        | DELETE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | clipcards             | clipcards_insert                                 | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (auth.uid() = coach_id)                                                                                                                                                                |
| public     | clipcards             | clipcards_select                                 | PERMISSIVE | {public}        | SELECT | ((auth.uid() = coach_id) OR (auth.uid() = client_id))                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | clipcards             | clipcards_update                                 | PERMISSIVE | {public}        | UPDATE | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | coach_availability    | Clients can view coach availability              | PERMISSIVE | {public}        | SELECT | (is_active = true)                                                                                                                                                                                                                              | null                                                                                                                                                                                   |
| public     | coach_availability    | Coaches can manage their own availability        | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | coach_time_slots      | Anyone can view available time slots             | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | coach_time_slots      | Coaches can manage their own time slots          | PERMISSIVE | {public}        | ALL    | ((auth.uid() = coach_id) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text)))))                                                                                                     | ((auth.uid() = coach_id) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text)))))                                            |
| public     | coaches               | Admins can manage all coaches                    | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'admin'::text))))                                                                                                                                  | null                                                                                                                                                                                   |
| public     | coaches               | Coaches can view their own record                | PERMISSIVE | {public}        | SELECT | (profile_id = auth.uid())                                                                                                                                                                                                                       | null                                                                                                                                                                                   |
| public     | daily_workout_cache   | Clients can manage their workout cache           | PERMISSIVE | {public}        | ALL    | (client_id = auth.uid())                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | exercise_alternatives | Anyone can read exercise alternatives            | PERMISSIVE | {public}        | SELECT | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | exercise_alternatives | Coaches can delete exercise alternatives         | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text))))                                                                                                                                  | null                                                                                                                                                                                   |
| public     | exercise_alternatives | Coaches can insert exercise alternatives         | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text))))                                                                         |
| public     | exercise_alternatives | Coaches can update exercise alternatives         | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text))))                                                                                                                                  | null                                                                                                                                                                                   |
| public     | exercise_categories   | Anyone can read exercise categories              | PERMISSIVE | {public}        | SELECT | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | exercise_categories   | Coaches can delete exercise categories           | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text))))                                                                                                                                  | null                                                                                                                                                                                   |
| public     | exercise_categories   | Coaches can insert exercise categories           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text))))                                                                         |
| public     | exercise_categories   | Coaches can update exercise categories           | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.id = auth.uid()) AND (profiles.role = 'coach'::text))))                                                                                                                                  | null                                                                                                                                                                                   |
| public     | exercise_categories   | Everyone can view exercise categories            | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | exercises             | Allow all authenticated access to exercises      | PERMISSIVE | {public}        | ALL    | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | exercises             | Coaches can manage exercises                     | PERMISSIVE | {public}        | ALL    | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | exercises             | Coaches can manage their exercises               | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | exercises             | Everyone can view exercises                      | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | food_items            | Enable all for authenticated users               | PERMISSIVE | {public}        | ALL    | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | foods                 | Anyone can read foods                            | PERMISSIVE | {public}        | SELECT | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | foods                 | Coaches can manage foods                         | PERMISSIVE | {public}        | ALL    | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | foods                 | Everyone can read foods                          | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | habit_assignments     | Clients can view their own assignments           | PERMISSIVE | {public}        | SELECT | (auth.uid() = client_id)                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | habit_assignments     | Coaches can manage assignments for their habits  | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM habits
  WHERE ((habits.id = habit_assignments.habit_id) AND (habits.coach_id = auth.uid()))))                                                                                                                       | null                                                                                                                                                                                   |
| public     | habit_logs            | Clients can manage their own habit logs          | PERMISSIVE | {public}        | ALL    | (auth.uid() = client_id)                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | habit_logs            | Coaches can view habit logs                      | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | habits                | Clients can view habits                          | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | habits                | Coaches can manage their own habits              | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | invite_codes          | Anyone can validate invite codes                 | PERMISSIVE | {public}        | SELECT | ((is_active = true) AND ((expires_at IS NULL) OR (expires_at > now())))                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | invite_codes          | Coaches can manage their invite codes            | PERMISSIVE | {public}        | ALL    | (coach_id = auth.uid())                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | leaderboard_rankings  | Anyone can view leaderboard rankings             | PERMISSIVE | {authenticated} | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | leaderboard_rankings  | System can manage rankings                       | PERMISSIVE | {authenticated} | ALL    | false                                                                                                                                                                                                                                           | false                                                                                                                                                                                  |
| public     | leaderboard_titles    | Anyone can view leaderboard titles               | PERMISSIVE | {authenticated} | SELECT | true                                                                                                                                                                                                                                            | null                                                                                                                                                                                   |
| public     | meal_completions      | Clients can insert their own meal completions    | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                            | (client_id = auth.uid())                                                                                                                                                               |
| public     | meal_completions      | Clients can read their own meal completions      | PERMISSIVE | {public}        | SELECT | (client_id = auth.uid())                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | meal_completions      | Coaches can read client meal completions         | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM clients c
  WHERE ((c.client_id = meal_completions.client_id) AND (c.coach_id = auth.uid()) AND (c.status = 'active'::text))))                                                                                       | null                                                                                                                                                                                   |
| public     | meal_food_items       | Clients can view food items from assigned meals  | PERMISSIVE | {public}        | SELECT | (auth.uid() IN ( SELECT meal_plan_assignments.client_id
   FROM (meal_plan_assignments
     JOIN meals ON ((meal_plan_assignments.meal_plan_id = meals.meal_plan_id)))
  WHERE (meals.id = meal_food_items.meal_id)))                           | null                                                                                                                                                                                   |
| public     | meal_food_items       | Coaches can manage food items for their meals    | PERMISSIVE | {public}        | ALL    | (auth.uid() IN ( SELECT meal_plans.coach_id
   FROM (meal_plans
     JOIN meals ON ((meal_plans.id = meals.meal_plan_id)))
  WHERE (meals.id = meal_food_items.meal_id)))                                                                       | null                                                                                                                                                                                   |
| public     | meal_food_items       | Coaches can manage meal food items               | PERMISSIVE | {public}        | ALL    | (meal_id IN ( SELECT m.id
   FROM (meals m
     JOIN meal_plans mp ON ((m.meal_plan_id = mp.id)))
  WHERE (mp.coach_id = auth.uid())))                                                                                                          | null                                                                                                                                                                                   |
| public     | meal_items            | Clients can read assigned meal items             | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (meals m
     JOIN meal_plan_assignments mpa ON ((mpa.meal_plan_id = m.meal_plan_id)))
  WHERE ((m.id = meal_items.meal_id) AND (mpa.client_id = auth.uid()) AND (mpa.is_active = true))))                           | null                                                                                                                                                                                   |
| public     | meal_items            | Coaches can manage meal items                    | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM (meals m
     JOIN meal_plans mp ON ((mp.id = m.meal_plan_id)))
  WHERE ((m.id = meal_items.meal_id) AND (mp.coach_id = auth.uid()))))                                                                               | null                                                                                                                                                                                   |
| public     | meal_plan_assignments | Clients can read their own assignments           | PERMISSIVE | {public}        | SELECT | (client_id = auth.uid())                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | meal_plan_assignments | Clients can view their own assignments           | PERMISSIVE | {public}        | SELECT | (auth.uid() = client_id)                                                                                                                                                                                                                        | null                                                                                                                                                                                   |
| public     | meal_plan_assignments | Coaches can manage assignments for their clients | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | meal_plan_assignments | Coaches can manage their meal plan assignments   | PERMISSIVE | {public}        | ALL    | (coach_id = auth.uid())                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | meal_plan_assignments | Coaches can manage their own assignments         | PERMISSIVE | {public}        | ALL    | (coach_id = auth.uid())                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | meal_plan_assignments | Enable all for authenticated users               | PERMISSIVE | {public}        | ALL    | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                           | null                                                                                                                                                                                   |
| public     | meal_plan_items       | Clients can read assigned meal plan items        | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (meal_plans
     JOIN meal_plan_assignments ON ((meal_plan_assignments.meal_plan_id = meal_plans.id)))
  WHERE ((meal_plans.id = meal_plan_items.meal_plan_id) AND (meal_plan_assignments.client_id = auth.uid())))) | null                                                                                                                                                                                   |
| public     | meal_plan_items       | Coaches can manage meal plan items               | PERMISSIVE | {public}        | ALL    | (coach_id = auth.uid())                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | meal_plans            | Clients can read assigned meal plans             | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM meal_plan_assignments mpa
  WHERE ((mpa.meal_plan_id = meal_plans.id) AND (mpa.client_id = auth.uid()) AND (mpa.is_active = true))))                                                                                 | null                                                                                                                                                                                   |
| public     | meal_plans            | Clients can view assigned meal plans             | PERMISSIVE | {public}        | SELECT | (auth.uid() IN ( SELECT meal_plan_assignments.client_id
   FROM meal_plan_assignments
  WHERE (meal_plan_assignments.meal_plan_id = meal_plan_assignments.id)))                                                                                 | null                                                                                                                                                                                   |
| public     | meal_plans            | Coaches can manage their meal plans              | PERMISSIVE | {public}        | ALL    | (auth.uid() = coach_id)                                                                                                                                                                                                                         | null                                                                                                                                                                                   |
| public     | meals                 | Clients can read meals from assigned meal plans  | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM (meal_plan_assignments mpa
     JOIN meal_plans mp ON ((mp.id = mpa.meal_plan_id)))
  WHERE ((mp.id = meals.meal_plan_id) AND (mpa.client_id = auth.uid()) AND (mpa.is_active = true))))                             | null                                                                                                                                                                                   |
| public     | meals                 | Clients can view meals from assigned meal plans  | PERMISSIVE | {public}        | SELECT | (auth.uid() IN ( SELECT meal_plan_assignments.client_id
   FROM meal_plan_assignments
  WHERE (meal_plan_assignments.meal_plan_id = meals.meal_plan_id)))                                                                                       | null                                                                                                                                                                                   |


| event_object_schema | event_object_table          | trigger_name                                  | event_manipulation | action_statement                                      | action_timing |
| ------------------- | --------------------------- | --------------------------------------------- | ------------------ | ----------------------------------------------------- | ------------- |
| public              | body_metrics                | update_body_metrics_updated_at                | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | booked_sessions             | booked_sessions_availability                  | INSERT             | EXECUTE FUNCTION mark_time_slot_unavailable()         | AFTER         |
| public              | booked_sessions             | booked_sessions_availability                  | UPDATE             | EXECUTE FUNCTION mark_time_slot_unavailable()         | AFTER         |
| public              | booked_sessions             | booked_sessions_updated_at                    | UPDATE             | EXECUTE FUNCTION update_booked_sessions_updated_at()  | BEFORE        |
| public              | clipcard_types              | update_clipcard_types_updated_at              | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | clipcards                   | update_clipcards_updated_at                   | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | coach_time_slots            | coach_time_slots_updated_at                   | UPDATE             | EXECUTE FUNCTION update_coach_time_slots_updated_at() | BEFORE        |
| public              | coaches                     | update_coaches_updated_at                     | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | goals                       | update_goals_updated_at                       | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | habit_assignments           | update_habit_assignments_updated_at           | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | habits                      | update_habits_updated_at                      | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | leaderboard_titles          | tr_title_duration                             | UPDATE             | EXECUTE FUNCTION calculate_title_duration()           | BEFORE        |
| public              | leaderboard_titles          | tr_title_duration                             | INSERT             | EXECUTE FUNCTION calculate_title_duration()           | BEFORE        |
| public              | meal_plan_assignments       | update_meal_plan_assignments_updated_at       | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | meals                       | update_meals_updated_at                       | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | mobility_metrics            | update_mobility_metrics_updated_at            | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | personal_records            | update_personal_records_updated_at            | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | profiles                    | tr_profiles_updated_at                        | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | program_assignment_progress | update_program_assignment_progress_updated_at | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | program_assignments         | update_program_assignments_updated_at         | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | workout_assignments         | update_workout_assignments_updated_at         | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | workout_block_exercises     | update_workout_block_exercises_updated_at     | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | workout_blocks              | update_workout_blocks_updated_at              | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | workout_programs            | update_workout_programs_updated_at            | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |
| public              | workout_templates           | update_workout_templates_updated_at           | UPDATE             | EXECUTE FUNCTION update_updated_at_column()           | BEFORE        |

| schema_name | type_name          | enum_values                                                                                                                                                  |
| ----------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| public      | user_role          | client, coach                                                                                                                                                |
| public      | workout_block_type | straight_set, superset, giant_set, drop_set, cluster_set, rest_pause, pyramid_set, pre_exhaustion, amrap, emom, emom_reps, tabata, circuit, for_time, ladder |

